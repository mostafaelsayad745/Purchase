<div class="container">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
    <h1>تفاصيل أمر الشراء</h1>
    <button class="btn" (click)="goBack()" style="background: #6c757d; color: white;">
      ← العودة للقائمة
    </button>
  </div>

  <div *ngIf="loading" class="loading">
    <p>جاري التحميل...</p>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error && purchaseOrder">
    <div class="card">
      <h2>معلومات الأمر</h2>
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
        <div>
          <strong>رقم الأمر:</strong>
          <p>{{ purchaseOrder.orderNumber }}</p>
        </div>
        <div>
          <strong>الحالة:</strong>
          <p>
            <span [class]="'status-badge ' + getStatusColor(purchaseOrder.status)">
              {{ getStatusText(purchaseOrder.status) }}
            </span>
          </p>
        </div>
        <div>
          <strong>تاريخ الأمر:</strong>
          <p>{{ purchaseOrder.orderDate | date:'yyyy-MM-dd HH:mm' }}</p>
        </div>
        <div>
          <strong>تاريخ التسليم المتوقع:</strong>
          <p>{{ purchaseOrder.expectedDeliveryDate | date:'yyyy-MM-dd' }}</p>
        </div>
        <div>
          <strong>المبلغ الإجمالي:</strong>
          <p style="font-size: 18px; color: var(--success-color); font-weight: bold;">
            {{ purchaseOrder.totalAmount | number:'1.2-2' }} ريال
          </p>
        </div>
      </div>
    </div>

    <div class="card" *ngIf="purchaseOrder.quotation">
      <h2>تفاصيل عرض السعر</h2>
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
        <div>
          <strong>المورد (عربي):</strong>
          <p>{{ purchaseOrder.quotation.supplierNameAr }}</p>
        </div>
        <div>
          <strong>المورد (English):</strong>
          <p>{{ purchaseOrder.quotation.supplierNameEn }}</p>
        </div>
        <div>
          <strong>الكمية المعروضة:</strong>
          <p>{{ purchaseOrder.quotation.quantityOffered }} قطعة</p>
        </div>
        <div>
          <strong>سعر الوحدة:</strong>
          <p>{{ purchaseOrder.quotation.unitPrice | number:'1.2-2' }} ريال</p>
        </div>
        <div>
          <strong>مدة التسليم:</strong>
          <p>{{ purchaseOrder.quotation.deliveryTimeDays }} يوم</p>
        </div>
      </div>
    </div>

    <div class="card" *ngIf="purchaseOrder.notes">
      <h2>الملاحظات</h2>
      <p>{{ purchaseOrder.notes }}</p>
    </div>

    <div class="card">
      <h2>المستندات</h2>
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
        <div>
          <strong>مستند أمر الشراء:</strong>
          <p>{{ purchaseOrder.purchaseOrderDocument || 'لم يتم الرفع' }}</p>
        </div>
        <div>
          <strong>مستند الفاتورة:</strong>
          <p>{{ purchaseOrder.invoiceDocument || 'لم يتم الرفع' }}</p>
        </div>
        <div>
          <strong>مستند إيصال التسليم:</strong>
          <p>{{ purchaseOrder.deliveryNoteDocument || 'لم يتم الرفع' }}</p>
        </div>
        <div>
          <strong>مستند اتفاقية المورد:</strong>
          <p>{{ purchaseOrder.supplierAgreementDocument || 'لم يتم الرفع' }}</p>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>التواريخ</h2>
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
        <div>
          <strong>تاريخ الإنشاء:</strong>
          <p>{{ purchaseOrder.createdAt | date:'yyyy-MM-dd HH:mm' }}</p>
        </div>
        <div>
          <strong>آخر تحديث:</strong>
          <p>{{ purchaseOrder.updatedAt | date:'yyyy-MM-dd HH:mm' }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
