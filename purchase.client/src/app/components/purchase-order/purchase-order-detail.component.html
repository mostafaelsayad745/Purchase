<div class="container">
  <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px;">
    <h1>ุชูุงุตูู ุฃูุฑ ุงูุดุฑุงุก</h1>
    <div style="display: flex; gap: 12px;">
      <button 
        *ngIf="!editMode" 
        class="btn btn-primary" 
        (click)="enableEditMode()"
        title="ุชุนุฏูู">
        โ๏ธ ุชุนุฏูู
      </button>
      <button class="btn" (click)="goBack()" style="background: #6c757d; color: white;">
        โ ุงูุนูุฏุฉ ูููุงุฆูุฉ
      </button>
    </div>
  </div>

  <div *ngIf="loading" class="loading">
    <p>ุฌุงุฑู ุงูุชุญููู...</p>
  </div>

  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <div *ngIf="!loading && !error && purchaseOrder">
    <div class="card">
      <h2>ูุนูููุงุช ุงูุฃูุฑ</h2>
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
        <div>
          <strong>ุฑูู ุงูุฃูุฑ:</strong>
          <p>{{ purchaseOrder.orderNumber }}</p>
        </div>
        <div>
          <strong>ุงูุญุงูุฉ:</strong>
          <p>
            <span [class]="'status-badge ' + getStatusColor(purchaseOrder.status)">
              {{ getStatusText(purchaseOrder.status) }}
            </span>
          </p>
        </div>
        <div>
          <strong>ุชุงุฑูุฎ ุงูุฃูุฑ:</strong>
          <p>{{ purchaseOrder.orderDate | date:'yyyy-MM-dd HH:mm' }}</p>
        </div>
        <div>
          <strong>ุชุงุฑูุฎ ุงูุชุณููู ุงููุชููุน:</strong>
          <p>{{ purchaseOrder.expectedDeliveryDate | date:'yyyy-MM-dd' }}</p>
        </div>
        <div>
          <strong>ุงููุจูุบ ุงูุฅุฌูุงูู:</strong>
          <p style="font-size: 18px; color: var(--success-color); font-weight: bold;">
            {{ purchaseOrder.totalAmount | number:'1.2-2' }} ุฑูุงู
          </p>
        </div>
      </div>
    </div>

    <div class="card" *ngIf="purchaseOrder.quotation">
      <h2>ุชูุงุตูู ุนุฑุถ ุงูุณุนุฑ</h2>
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
        <div>
          <strong>ุงูููุฑุฏ (ุนุฑุจู):</strong>
          <p>{{ purchaseOrder.quotation.supplierNameAr }}</p>
        </div>
        <div>
          <strong>ุงูููุฑุฏ (English):</strong>
          <p>{{ purchaseOrder.quotation.supplierNameEn }}</p>
        </div>
        <div>
          <strong>ุงููููุฉ ุงููุนุฑูุถุฉ:</strong>
          <p>{{ purchaseOrder.quotation.quantityOffered }} ูุทุนุฉ</p>
        </div>
        <div>
          <strong>ุณุนุฑ ุงููุญุฏุฉ:</strong>
          <p>{{ purchaseOrder.quotation.unitPrice | number:'1.2-2' }} ุฑูุงู</p>
        </div>
        <div>
          <strong>ูุฏุฉ ุงูุชุณููู:</strong>
          <p>{{ purchaseOrder.quotation.deliveryTimeDays }} ููู</p>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>ุงูููุงุญุธุงุช</h2>
      <div *ngIf="!editMode">
        <p>{{ purchaseOrder.notes || 'ูุง ุชูุฌุฏ ููุงุญุธุงุช' }}</p>
      </div>
      <div *ngIf="editMode">
        <textarea 
          class="form-control" 
          [(ngModel)]="editData.notes"
          rows="3"
          placeholder="ุฃุฏุฎู ุงูููุงุญุธุงุช..."
        ></textarea>
      </div>
    </div>

    <div class="card">
      <h2>ุงููุณุชูุฏุงุช</h2>
      <div *ngIf="!editMode" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
        <div>
          <strong>ูุณุชูุฏ ุฃูุฑ ุงูุดุฑุงุก:</strong>
          <p>{{ purchaseOrder.purchaseOrderDocument || 'ูู ูุชู ุงูุฑูุน' }}</p>
        </div>
        <div>
          <strong>ูุณุชูุฏ ุงููุงุชูุฑุฉ:</strong>
          <p>{{ purchaseOrder.invoiceDocument || 'ูู ูุชู ุงูุฑูุน' }}</p>
        </div>
        <div>
          <strong>ูุณุชูุฏ ุฅูุตุงู ุงูุชุณููู:</strong>
          <p>{{ purchaseOrder.deliveryNoteDocument || 'ูู ูุชู ุงูุฑูุน' }}</p>
        </div>
        <div>
          <strong>ูุณุชูุฏ ุงุชูุงููุฉ ุงูููุฑุฏ:</strong>
          <p>{{ purchaseOrder.supplierAgreementDocument || 'ูู ูุชู ุงูุฑูุน' }}</p>
        </div>
      </div>
      <div *ngIf="editMode" style="display: grid; grid-template-columns: 1fr; gap: 16px;">
        <div class="form-group">
          <label class="form-label">ูุณุชูุฏ ุฃูุฑ ุงูุดุฑุงุก:</label>
          <input 
            type="text" 
            class="form-control" 
            [(ngModel)]="editData.purchaseOrderDocument"
            placeholder="ุฑุงุจุท ุฃู ุงุณู ูุณุชูุฏ ุฃูุฑ ุงูุดุฑุงุก"
          />
        </div>
        <div class="form-group">
          <label class="form-label">ูุณุชูุฏ ุงููุงุชูุฑุฉ:</label>
          <input 
            type="text" 
            class="form-control" 
            [(ngModel)]="editData.invoiceDocument"
            placeholder="ุฑุงุจุท ุฃู ุงุณู ูุณุชูุฏ ุงููุงุชูุฑุฉ"
          />
        </div>
        <div class="form-group">
          <label class="form-label">ูุณุชูุฏ ุฅูุตุงู ุงูุชุณููู:</label>
          <input 
            type="text" 
            class="form-control" 
            [(ngModel)]="editData.deliveryNoteDocument"
            placeholder="ุฑุงุจุท ุฃู ุงุณู ูุณุชูุฏ ุฅูุตุงู ุงูุชุณููู"
          />
        </div>
        <div class="form-group">
          <label class="form-label">ูุณุชูุฏ ุงุชูุงููุฉ ุงูููุฑุฏ:</label>
          <input 
            type="text" 
            class="form-control" 
            [(ngModel)]="editData.supplierAgreementDocument"
            placeholder="ุฑุงุจุท ุฃู ุงุณู ูุณุชูุฏ ุงุชูุงููุฉ ุงูููุฑุฏ"
          />
        </div>
        <div style="display: flex; gap: 12px; margin-top: 16px;">
          <button 
            class="btn btn-success" 
            (click)="saveChanges()"
            [disabled]="saving"
          >
            {{ saving ? 'ุฌุงุฑู ุงูุญูุธ...' : '๐พ ุญูุธ ุงูุชุบููุฑุงุช' }}
          </button>
          <button 
            class="btn" 
            (click)="cancelEdit()"
            [disabled]="saving"
            style="background: #6c757d; color: white;"
          >
            ุฅูุบุงุก
          </button>
        </div>
      </div>
    </div>

    <div class="card">
      <h2>ุงูุชูุงุฑูุฎ</h2>
      <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
        <div>
          <strong>ุชุงุฑูุฎ ุงูุฅูุดุงุก:</strong>
          <p>{{ purchaseOrder.createdAt | date:'yyyy-MM-dd HH:mm' }}</p>
        </div>
        <div>
          <strong>ุขุฎุฑ ุชุญุฏูุซ:</strong>
          <p>{{ purchaseOrder.updatedAt | date:'yyyy-MM-dd HH:mm' }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
